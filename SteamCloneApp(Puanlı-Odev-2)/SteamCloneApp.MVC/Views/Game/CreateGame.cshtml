@model CreateGameViewModel
@{
    ViewData["Title"] = "CreateGame";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
    <div class="row">
        <div class="col-6">
            <div class="mb-3">
                <label for="title">Title</label>
                <input class="form-control" id="title" placeholder="Title giriniz..." />
            </div>
            <div class="mb-3">
                <label for="price">Fiyat</label>
                <input class="form-control" id="price" placeholder="Fiyat giriniz..." />
            </div>
            <div class="mb-3">
                <label>Çıkış tarihi</label>
                <input type="datetime-local" id="releaseAt" class="form-control" />
            </div>
            <div class="mb-3">
                <label for="publishedById">Yayımcı</label>
                <select class="form-select" id="publishedById" placeholder="Fiyat giriniz...">
                    <option selected hidden>Publisher seçiniz</option>
                    @foreach (var publisher in Model.Publishers)
                    {
                        <option value=@publisher.Id>@publisher.Name</option>
                    }
                </select>
            </div>
            <div class="mb-3">
                <label for="developedById">Geliştirici Stüdyo</label>
                <select class="form-select" id="developedById" placeholder="Fiyat giriniz...">
                    <option selected hidden>Developer seçiniz</option>
                    @foreach (var developer in Model.Developers)
                    {
                        <option value=@developer.Id>@developer.Name</option>
                    }
                </select>
            </div>
        </div>
        <div class="col-6">
            <h1>File Upload</h1>
        </div>
    </div>
    <div class="row">
        <div class="mb-3 col-12">
        <textarea class="form-control" rows="10" id="description" placeholder="Açıklama giriniz..."></textarea>
        </div>
    </div>
    <div class="row">
        <h4>Türler</h4>
        <div class="mb-3 col-12 d-flex flex-row">
            @foreach (var genre in Model.Genres)
            {
                <div class="form-check m-2">
                    <input class="form-check-input" type="checkbox" value=" @genre.Id" name="genre" id=@($"flexCheck{genre.Id}")>
                    <label class="form-check-label" for=@($"flexCheck{genre.Id}")>
                        @genre.Name
                    </label>
                </div>
            }
        </div>
    </div>
    <button type="button" id="add" class="btn btn-outline-success">Ekle</button>

@section Scripts{
    <script>
       const getDataFromInputs = () => {
            let title = document.getElementById('title').value
            let description = document.getElementById('description').value
            let publishedById = document.getElementById('publishedById').value
            let developedById = document.getElementById('developedById').value
            let price = document.getElementById('price').value
            let releaseAt = document.getElementById('releaseAt').value
            let array = [...document.getElementsByName(`genre`)]
            let checkedGenres = array.filter(p => p.checked)
            let genres = checkedGenres.map(p => p.value)

            let data = {
                title,
                description,
                publishedById,
                developedById,
                price,
                releaseAt,
                genres
            }
            return data
       }
        $(document).ready(function(){
          $('#add').on('click',function(){
                $.ajax({
                    type: "POST",
                    url: "/game/creategame",
                    data:getDataFromInputs(),
                    success:function(){}                    
                })
          })
        })
    </script>
}